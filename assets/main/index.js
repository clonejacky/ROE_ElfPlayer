System.register("chunks:///_virtual/Main.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,e,a,o,s,n,i,l,y,c,u;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.defineProperty},function(t){n=t.cclegacy,i=t._decorator,l=t.dragonBones,y=t.resources,c=t.JsonAsset,u=t.Component}],execute:function(){var d,h,g,f,p,A,m;n._RF.push({},"20849xMPERIy5kAsCLyVuTO","Main",void 0);var v=i.ccclass,B=i.property,_="body_idle";t("Main",(d=v("Main"),h=B(l.ArmatureDisplay),g=B([l.ArmatureDisplay]),d((A=r((p=function(t){function r(){for(var r,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return r=t.call.apply(t,[this].concat(n))||this,a(o(r),"mainBody",A,o(r)),a(o(r),"slot",m,o(r)),s(o(r),"slotArray",["eye_l","eye_r","ear_l","ear_r","chest","top","top_l","back","back_l","back_r","tail"]),s(o(r),"jsonDataForGame",void 0),s(o(r),"pos",1),r}e(r,t);var n=r.prototype;return n.onLoad=function(){var t=this,r=this.getParameterByName("elfGain"),e=this.getParameterByName("pos");if(e&&(this.pos="0"==e?1:-1),null!=r){var a=this.splitStringByNum(r,3);y.load("Json/Elfparts",c,(function(r,e){if(r&&console.log("loadJsonData err: "+r),e){t.jsonDataForGame=e.json.data;var o=t.transferData(a);t.setPartsData(o)}}))}},n.transferData=function(t){for(var r=["","","","","","","","","","","",""],e=0;e<t.length;++e){var a=this.jsonDataForGame[t[e]],o=a.part;3==o?(r[1]=a.id,r[2]=a.id):4==o?(r[3]=a.id,r[4]=a.id):5==o?r[5]=a.id:1==o?r[6]=a.id:2==o?r[7]=a.id:6==o?r[8]=a.id:7==o?(r[9]=a.id,r[10]=a.id):8==o?r[11]=a.id:0==o&&(r[0]=a.id)}return r},n.setPartsData=function(t){for(var r=t[0],e=[],a=1;a<t.length;++a)e.push(t[a]);this.setElfBody(r,e)},n.setElfBody=function(t,r){var e=this;y.loadDir("ElvesKing/"+t,(function(t,a){if(0!=a.length){for(var o=[],s=0;s<a.length;++s)a[s]instanceof l.DragonBonesAsset&&(o[0]=a[s]),a[s]instanceof l.DragonBonesAtlasAsset&&(o[1]=a[s]);e.mainBody.dragonAsset=o[0],e.mainBody.dragonAtlasAsset=o[1],e.mainBody.armatureName="elfKing",e.mainBody.playAnimation(_,0),e.mainBody.node.setScale(1.8*e.pos,1.8,1.8),e.elvesKingSlotMatch(r,e.slot,e.mainBody)}else y.loadDir("ElvesKing/body_beast_1",(function(t,a){if(a){for(var o=[],s=0;s<a.length;++s)a[s]instanceof l.DragonBonesAsset&&(o[0]=a[s]),a[s]instanceof l.DragonBonesAtlasAsset&&(o[1]=a[s]);e.mainBody.dragonAsset=o[0],e.mainBody.dragonAtlasAsset=o[1],e.mainBody.armatureName="elfKing",e.mainBody.playAnimation(_,0),e.mainBody.node.setScale(1.8*e.pos,1.8,1.8),e.elvesKingSlotMatch(r,e.slot,e.mainBody)}}))}))},n.elvesKingSlotMatch=function(t,r,e){for(var a=l.CCFactory.getInstance(),o=e.armature(),s=0;s<t.length;++s)if(""!=t[s]){var n=o.getSlot(this.slotArray[s]);if(null==n){console.error("美術素材 : 精靈王本體 = "+e.dragonAsset.name+"節點 : "+this.slotArray[s]+"名稱錯誤，請美術人員修正");continue}var i=!1;if("eye_l"==this.slotArray[s]||"eye_r"==this.slotArray[s]){var y=this.slotArray[s].substring(this.slotArray[s].length-2,this.slotArray[s].length),c=a.replaceSlotDisplay(r[s].getArmatureKey(),this.slotArray[s],t[s]+"_1"+y,this.slotArray[s]+"/"+t[s]+"_1"+y,n,0),u=a.replaceSlotDisplay(r[s].getArmatureKey(),this.slotArray[s],t[s]+"_2"+y,this.slotArray[s]+"/"+t[s]+"_2"+y,n,2);c&&u||(i=!0)}else if("ear_l"==this.slotArray[s]||"ear_r"==this.slotArray[s]||"back_l"==this.slotArray[s]||"back_r"==this.slotArray[s]){var d=this.slotArray[s].substring(this.slotArray[s].length-2,this.slotArray[s].length);a.replaceSlotDisplay(r[s].getArmatureKey(),this.slotArray[s],t[s]+d,this.slotArray[s]+"/"+t[s]+d,n,0)||(i=!0)}else{a.replaceSlotDisplay(r[s].getArmatureKey(),this.slotArray[s],t[s],t[s],n,0)||(i=!0)}i&&console.log("配件缺少 : "+t[s])}else{var h=o.getSlot(this.slotArray[s]);if(null==h){console.error("美術素材 : 精靈王本體 = "+e.dragonAsset.name+"節點 : "+this.slotArray[s]+"名稱錯誤，請美術人員修正");continue}h.displayIndex=-1,h.displayController=""}o.invalidUpdate()},n.getParameterByName=function(t,r){var e=window.location;if(e){var a=e.href;if(a){r||(r=a),t=t.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(r);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}}},n.splitStringByNum=function(t,r){for(var e=[],a=0,o=t.length;a<o;a+=r)e.push(t.substring(a,a+r));return e},r}(u)).prototype,"mainBody",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=r(p.prototype,"slot",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=p))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Main.ts"],(function(){"use strict";return{setters:[null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});